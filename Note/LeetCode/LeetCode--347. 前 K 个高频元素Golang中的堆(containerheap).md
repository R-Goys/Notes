[ä¾‹é¢˜é“¾æ¥-å‰kä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.cn/problems/top-k-frequent-elements/submissions/596342618/?envType=study-plan-v2&envId=top-100-liked)

----

## å‰è¨€

ä»¥å‰éƒ½æ˜¯ç”¨çš„C++å†™ç®—æ³•é¢˜ï¼Œæœ€è¿‘ä¹Ÿæƒ³ç†Ÿæ‚‰ä¸€ä¸‹golangçš„æ•°æ®ç»“æ„ï¼Œæ•…æ¥ä¸€ç¯‡é¢˜è§£+å †åˆ†æã€‚



## æ­£æ–‡

è¿™é‡Œé‡ç‚¹ä¸åœ¨åˆ†æé¢˜ç›®ï¼Œåœ¨äºgolangä¸­çš„ `container/heap`

å¯¹äºå†…éƒ¨å®ç°é€»è¾‘æœ‰å…´è¶£çš„å¯ä»¥å»çœ‹çœ‹æºç ã€‚

è¿™é‡Œå…ˆç»™å‡ºé¢˜è§£çš„ä»£ç 

```go	
package main

import (
	"container/heap"
	"fmt"
)

// IHeap æ˜¯ä¸€ä¸ªæœ€å°å †çš„å®ç°
type IHeap [][2]int

func (h IHeap) Len() int {
	return len(h)
}

func (h IHeap) Less(i, j int) bool {
	return h[i][1] < h[j][1]
}
func (h IHeap) Swap(i, j int) {
	h[i], h[j] = h[j], h[i]
}

// Push æ–¹æ³•å°†å…ƒç´ æ·»åŠ åˆ°å †ä¸­
func (h *IHeap) Push(x interface{}) {
	*h = append(*h, x.([2]int))
}

// Pop æ–¹æ³•ç§»é™¤å¹¶è¿”å›å †é¡¶å…ƒç´ 
func (h *IHeap) Pop() interface{} {
	old := *h
	n := len(old)
	x := old[n-1]
	*h = old[0 : n-1]
	return x
}

// topKFrequent å‡½æ•°æ‰¾åˆ°æ•°ç»„ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„ k ä¸ªå…ƒç´ 
func topKFrequent(nums []int, k int) []int {
	// ç»Ÿè®¡æ¯ä¸ªæ•°å­—çš„å‡ºç°é¢‘ç‡
	m := map[int]int{}
	for _, num := range nums {
		m[num]++
	}

	// åˆ›å»ºæœ€å°å †
	h := &IHeap{}
	heap.Init(h)

	// å°†å…ƒç´ æ¨å…¥å †å¹¶ç»´æŠ¤å †çš„å¤§å°
	for key, value := range m {
		heap.Push(h, [2]int{key, value})
		if h.Len() > k {
			heap.Pop(h)
		}
	}

	// ä»å †ä¸­æå–ç»“æœ
	ret := make([]int, k)
	for i := 0; i < k; i++ {
		ret[k-i-1] = heap.Pop(h).([2]int)[0]
	}
	return ret
}

func main() {
	nums := []int{1, 1, 216, 216, 216, 216, 216, 216, 6, 1, 2, 2, 3, 9, 9, 5, 6, 0, 6, 6, 9, 4, 5, 12, 6, 459, 15, 15, 216, 26, 15, 115, 15}
	k := 5
	fmt.Println(topKFrequent(nums, k))
}
```

### 1. ç»“æ„å®šä¹‰

è¿™éƒ¨åˆ†å®šä¹‰äº†æˆ‘ä»¬çš„å †ä¸­å…ƒç´ çš„åŸºæœ¬ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œè¿™ä¹Ÿä»¤goä¸­çš„å †çš„å…ƒç´ æ›´åŠ çµæ´»ï¼Œå¯ä»¥æ”¯æŒå¾ˆå¤šæ•°æ®ç»“æ„ã€‚

```go
type IHeap [][2]int
```

### 2. Len()æ–¹æ³•

é¦–å…ˆï¼Œéœ€è¦å®ç°æˆ‘ä»¬çš„Lenæ–¹æ³•ï¼Œå®ç°è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯ï¼Œä»–å°†ä¼šåœ¨ä¹‹åå‡½æ•°å†…éƒ¨çš„Down/Upæ–¹æ³•æ‰€è°ƒç”¨ï¼Œå…·æœ‰é‡è¦çš„ä½œç”¨(è¿™éƒ¨åˆ†åœ¨æºç é‡Œé¢)

```go	
func (h IHeap) Len() int {
	return len(h)
}
```

### 3. Less()æ–¹æ³•

Lessæ–¹æ³•çš„å®šä¹‰ä¸»è¦æ˜¯å®ç°äº†å †å†…éƒ¨çš„æ¯”è¾ƒå™¨ï¼Œä¹Ÿå°±æ˜¯æ’åºåŸåˆ™ï¼Œå°±æ˜¯å¤§æ ¹å †å’Œå°æ ¹å †çš„åŒºåˆ«

```go
func (h IHeap) Less(i, j int) bool {
	return h[i][1] < h[j][1]
}
```

### 4. Swap()æ–¹æ³•

è¿™éƒ¨åˆ†ä¹Ÿæ˜¯ä¸»è¦ç”¨äºDownå’ŒUpå†…éƒ¨è°ƒç”¨ï¼Œè¡¨ç¤ºåˆ©ç”¨ä¼ å…¥çš„ä¸‹æ ‡æ¥è¿›è¡Œå…ƒç´ ä½ç½®çš„äº¤æ¢

```go
func (h IHeap) Swap(i, j int) {
    h[i], h[j] = h[j], h[i]
}
```

### 5. Push()æ–¹æ³•

pushæ–¹æ³•ä¹Ÿæ˜¯ç”¨äºå†…éƒ¨çš„pushå‡½æ•°çš„è°ƒç”¨ï¼Œæ­¤å¤„ä¸éœ€è¦è¿›è¡ŒDownæˆ–è€…Upçš„æ“ä½œï¼Œå› ä¸ºå†…éƒ¨çš„Pushå‡½æ•°å·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†ã€‚

```go
func (h *IHeap) Push(x interface{}) {
	*h = append(*h, x.([2]int))
}
```

### 6. Pop()æ–¹æ³•

ç§»é™¤å †é¡¶å…ƒç´ çš„æ–¹æ³•ï¼ŒåŒæ ·ç”¨äºå†…éƒ¨è°ƒç”¨

```go
func (h *IHeap) Pop() interface{} {
    old := *h
    n := len(old)
    x := old[n-1]
    *h = old[0 : n-1]
    return x
}
```



## ç»“è¯­

ä»¥ä¸Šæåˆ°æ–¹æ³•éƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ª`å †`,å¹¶å®ç°Heapçš„æ¥å£ï¼Œæ‰èƒ½å¯¹heapçš„å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œä»è€Œå®ç°å †çš„æ•ˆæœã€‚

æ€»çš„æ¥è¯´ï¼Œgoçš„å †è™½ç„¶å®ç°æ¯”è¾ƒç¹çï¼Œä½†æ˜¯ç®¡ç†èµ·æ¥å´æ¯”è¾ƒçµæ´»ï¼Œå…¶å®æ¯”èµ·c++é‡Œé¢çš„stlï¼Œgoé‡Œé¢çš„container/heapè®©æˆ‘æ›´æœ‰å†™çš„æ¬²æœ›å§...ğŸ˜‹