## 多级缓存的数据一致性

常见的多级缓存模式为 **本地缓存->分布式缓存->数据库**，对于数据库和分布式缓存的同步策略只需要写后删除即可。而本地缓存需要通过消息队列通知其他节点将这个缓存删除，当然，我们也可以通过 CDC 监听 binlog 来实现 Redis 缓存删除（原因是实现可靠的删除）。

当然 mq 是可能丢消息的，我们也不可能为了消息不丢就做个 outbox，我们还可以给本地缓存指定一个相对比较小的 ttl，防止 mq 消息丢失导致脏数据一直滞留。

对于有更高的一致性需求，我们可以增加一个版本号的策略来确保一致性